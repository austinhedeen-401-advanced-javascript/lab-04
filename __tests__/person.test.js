// TODO - write a full test suite, roughly reflecting memory.js